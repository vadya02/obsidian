TODO:
1) Сделать изменение цвета кластера в зависимости от показателя
2) Попробовать исправить появление подсказки при наведении
3) 



нужно сделать кластеризацию точек на карте
есть объект с ключами и значениями
как при переборе точек добавлять нечисловые значения в ключ (при этом ключ должен превратиться в массив, если значения нечисловые)




если ключа нету в массиве result то нужно добавить его

город: харанцы
абонент: 10
sum: 6000

key = город

1) подается точка



если ругается на импорты loaders.gl и в папке handlebars, нужно удалить node_modules в папках handlebars и C:\Users\MandanovVM1\Desktop\superset\BI\superset-frontend\plugins\plugin-chart-country-map-v2. 
Также нужно удалить общий node_modules и запустить npm install.



![[Pasted image 20240731130741.png]]

Решение:
![[Pasted image 20240731130800.png]]




docker compose -f docker-compose-local.yml up -d --force-recreate

dataMask = {...dataMask, extraFormData: {filters: [{val: [1521606400000, 1721706400000]}]}}


      dataMask = {...dataMask, extraFormData: {filters: [{val: [1521606400000, 1721706400000]}]}, filterState: {label: [new Date(1521606400000).toLocaleDateString(), new Date(1721706400000).toLocaleDateString()], value: [[1521606400000, 1721706400000]], selectedValues: [1521606400000, 1721706400000]}}






        // switch (formData.timeGrainSqla) {

        //   case 'P1W':

        //     endDate = dayjs(values[0]).add(1, 'week').valueOf()

        //     break;

        //   case 'P1M':

        //     endDate = dayjs(values[0]).add(1, 'month').valueOf()

        //     break;

        //   case 'P1Y':

        //     endDate = dayjs(values[0]).add(1, 'year').valueOf()

        //     break;

        //   case 'P3M':

        //     endDate = dayjs(values[0]).add(3, 'month').valueOf()

        //     break;

        // }



На вход поступают данные (числитель и знаменатель), 